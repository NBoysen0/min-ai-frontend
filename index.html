<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Navnegenerator til Nyfødte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <!-- Google AdSense Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2250830039433254"
     crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-image 0.5s ease-in-out;
        }
        h1, .font-display {
            font-family: 'Pacifico', cursive;
        }
        .loader {
            border: 5px solid #f0f0f0;
            border-top: 5px solid #60A5FA; /* Pastel Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .card {
            background-color: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #f3f4f6;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
        .main-container {
             background-color: rgba(255, 255, 255, 0.8);
             backdrop-filter: blur(10px);
             border-radius: 24px;
             box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
             border: 1px solid rgba(255, 255, 255, 0.9);
        }
        .cloud {
            position: absolute;
            opacity: 0.2;
            z-index: -1;
            animation: float 20s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-20px) translateX(10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }
    </style>
</head>
<body class="text-gray-700 flex flex-col min-h-screen">
    
    <!-- Decorative clouds -->
    <svg class="cloud" style="top: 10%; left: 5%; width: 150px; animation-duration: 25s;" viewBox="0 0 100 60" fill="#a7d7f9"><path d="M83.4,23.3c-0.2-11.3-9.4-20.4-20.7-20.2C53.4,3.3,45.4,10,43.2,19.3c-2.8-3.4-7.2-5.5-12.1-5.5c-8.3,0-15.1,6.8-15.1,15.1 c0,0.9,0.1,1.8,0.3,2.6C6.9,32.4,0,40.3,0,49.4C0,55.3,4.7,60,10.5,60h79c5.8,0,10.5-4.7,10.5-10.5 C100,42.1,92.9,34.1,83.4,23.3z"></path></svg>
    <svg class="cloud" style="top: 20%; right: 10%; width: 100px; animation-duration: 30s; animation-delay: -5s;" viewBox="0 0 100 60" fill="#a7d7f9"><path d="M83.4,23.3c-0.2-11.3-9.4-20.4-20.7-20.2C53.4,3.3,45.4,10,43.2,19.3c-2.8-3.4-7.2-5.5-12.1-5.5c-8.3,0-15.1,6.8-15.1,15.1 c0,0.9,0.1,1.8,0.3,2.6C6.9,32.4,0,40.3,0,49.4C0,55.3,4.7,60,10.5,60h79c5.8,0,10.5-4.7,10.5-10.5 C100,42.1,92.9,34.1,83.4,23.3z"></path></svg>
    <svg class="cloud" style="bottom: 10%; left: 15%; width: 120px; animation-duration: 20s; animation-delay: -10s;" viewBox="0 0 100 60" fill="#a7d7f9"><path d="M83.4,23.3c-0.2-11.3-9.4-20.4-20.7-20.2C53.4,3.3,45.4,10,43.2,19.3c-2.8-3.4-7.2-5.5-12.1-5.5c-8.3,0-15.1,6.8-15.1,15.1 c0,0.9,0.1,1.8,0.3,2.6C6.9,32.4,0,40.3,0,49.4C0,55.3,4.7,60,10.5,60h79c5.8,0,10.5-4.7,10.5-10.5 C100,42.1,92.9,34.1,83.4,23.3z"></path></svg>

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl flex-grow">
        <header class="text-center mb-8 relative pt-8">
             <div class="absolute top-0 right-0">
                <label for="language-select" class="sr-only">Vælg sprog</label>
                <select id="language-select" class="rounded-lg border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                    <option value="da">Dansk</option>
                    <option value="en">English</option>
                    <option value="de">Deutsch</option>
                    <option value="es">Español</option>
                </select>
            </div>
            <h1 id="main-title" class="text-5xl md:text-6xl font-display text-sky-800">Navne-Magikeren</h1>
            <p id="subtitle" class="mt-6 text-lg text-sky-700">Find det perfekte og meningsfulde navn til dit barn.</p>
            <button id="how-it-works-button" class="mt-4 text-sky-600 underline hover:text-sky-800 text-sm">Hvordan virker det?</button>
        </header>
        
        <!-- Top banner -->
        <div class="my-8">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2250830039433254"
                 data-ad-slot="5125922255"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <main>
            <div class="main-container p-6 md:p-8">
                <form id="name-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Gender Selection -->
                        <div>
                            <label id="label-gender" class="block text-sm font-medium text-gray-700 mb-2">Barnets Køn</label>
                            <div class="flex items-center space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="gender" value="Dreng" class="h-4 w-4 text-blue-500 border-gray-300 focus:ring-blue-400" checked>
                                    <span id="gender-boy" class="ml-2 text-gray-700">Dreng</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="gender" value="Pige" class="h-4 w-4 text-pink-500 border-gray-300 focus:ring-pink-400">
                                    <span id="gender-girl" class="ml-2 text-gray-700">Pige</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="gender" value="Kønsneutral" class="h-4 w-4 text-purple-500 border-gray-300 focus:ring-purple-400">
                                    <span id="gender-neutral" class="ml-2 text-gray-700">Neutral</span>
                                </label>
                            </div>
                        </div>

                        <!-- Date of Birth (Optional) -->
                        <div>
                            <label id="label-dob" for="dob" class="block text-sm font-medium text-gray-700">Fødselsdato (valgfri)</label>
                            <input type="date" id="dob" name="dob" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>

                        <!-- Parents' Names (Optional) -->
                        <div>
                            <label id="label-parent1" for="parent1" class="block text-sm font-medium text-gray-700">Forælder 1's Navn (valgfri)</label>
                            <input type="text" id="parent1" name="parent1" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>
                        <div>
                            <label id="label-parent2" for="parent2" class="block text-sm font-medium text-gray-700">Forælder 2's Navn (valgfri)</label>
                            <input type="text" id="parent2" name="parent2" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>
                        
                        <!-- Middle and Last Name (Optional) -->
                        <div>
                            <label id="label-middlename" for="middlename" class="block text-sm font-medium text-gray-700">Ønsket Mellemnavn (valgfri)</label>
                            <input type="text" id="middlename" name="middlename" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>
                        <div>
                            <label id="label-lastname" for="lastname" class="block text-sm font-medium text-gray-700">Ønsket Efternavn (valgfri)</label>
                            <input type="text" id="lastname" name="lastname" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>

                        <!-- Nationality (Optional) -->
                        <div>
                            <label id="label-nationality" for="nationality" class="block text-sm font-medium text-gray-700">Nationalitet (valgfri)</label>
                            <input type="text" id="nationality" name="nationality" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                        </div>

                        <!-- AI Method -->
                        <div>
                            <label id="label-method" for="method" class="block text-sm font-medium text-gray-700">Vælg en kreativ metode</label>
                            <select id="method" name="method" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>

                        <!-- Name Style/Era -->
                        <div class="md:col-span-1">
                            <label id="label-name-style" for="name-style" class="block text-sm font-medium text-gray-700">Navnestil / Tidsperiode</label>
                            <select id="name-style" name="name-style" class="mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>

                        <!-- Generate Middle Name Checkbox -->
                        <div class="flex items-center justify-self-start">
                            <label class="flex items-center mt-4">
                                <input type="checkbox" id="generate-middlename" name="generate-middlename" class="h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500">
                                <span id="label-generate-middlename" class="ml-2 text-sm font-medium text-gray-700">Generer også et mellemnavn</span>
                            </label>
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <button type="submit" id="generate-button" class="w-full md:w-auto inline-flex justify-center items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-gradient-to-r from-amber-400 to-yellow-400 hover:from-amber-500 hover:to-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-transform transform hover:scale-105">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                            </svg>
                            <span id="generate-button-text">Find Navne</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="results-container" class="mt-10">
                <div id="loader" class="hidden loader"></div>
                <div id="error-message" class="hidden text-center text-red-500 bg-red-100 p-4 rounded-md"></div>
                <div id="results" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- AI-generated names will be appended here -->
                </div>
                <div id="regenerate-container" class="mt-8 text-center hidden">
                     <button id="regenerate-button" class="w-full md:w-auto inline-flex justify-center items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-gradient-to-r from-emerald-400 to-teal-400 hover:from-emerald-500 hover:to-teal-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-transform transform hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                        </svg>
                        <span id="regenerate-button-text">Prøv Igen</span>
                    </button>
                </div>
            </div>
            
            <!-- Bottom ad -->
            <div class="mt-8">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2250830039433254"
                     data-ad-slot="8873595578"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

        </main>
    </div>
    
    <footer class="w-full bg-white/50 mt-12 py-4">
        <div class="container mx-auto text-center text-sm text-gray-500 space-x-4">
            <span>&copy; 2024 Navnegenerator</span>
            <a href="#" id="privacy-policy-link" class="underline hover:text-gray-800">Privatlivspolitik</a>
        </div>
    </footer>

    <!-- Help Modal -->
    <div id="help-modal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-xl p-6 max-w-lg w-full transform scale-95 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4 border-b pb-2 sticky top-0 bg-white">
                <h3 id="modal-title" class="text-xl font-bold font-display text-gray-800"></h3>
                <button id="modal-close-button" class="text-gray-400 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-body" class="text-gray-700 space-y-4">
                <!-- Content will be injected here by JS -->
            </div>
        </div>
    </div>


    <script>
        const translations = {
            da: {
                mainTitle: "Navne-Magikeren",
                subtitle: "Find det perfekte og meningsfulde navn til dit barn.",
                howItWorksButton: "Hvordan virker det?",
                privacyPolicyLink: "Privatlivspolitik",
                labelGender: "Barnets Køn",
                genderBoy: "Dreng",
                genderGirl: "Pige",
                genderNeutral: "Neutral",
                labelDob: "Fødselsdato (valgfri)",
                labelParent1: "Forælder 1's Navn (valgfri)",
                parent1Placeholder: "Fx 'Anne'",
                labelParent2: "Forælder 2's Navn (valgfri)",
                parent2Placeholder: "Fx 'Jens'",
                labelMiddlename: "Ønsket Mellemnavn (valgfri)",
                middlenamePlaceholder: "Fx 'Holm'",
                labelLastname: "Ønsket Efternavn (valgfri)",
                lastnamePlaceholder: "Fx 'Nielsen'",
                labelNationality: "Nationalitet (valgfri)",
                nationalityPlaceholder: "Fx 'Dansk', 'Skandinavisk'",
                labelMethod: "Vælg en kreativ metode",
                methodOptions: {
                    "En blanding af alle metoder": "Kreativ blanding",
                    "Astrologi (baseret på stjernetegn)": "Astrologi",
                    "Numerologi (baseret på tal og navne)": "Numerologi",
                    "Historisk og mytologisk betydning": "Historisk & Mytologisk",
                    "Naturinspiration (blomster, træer, steder)": "Naturinspiration"
                },
                labelNameStyle: "Navnestil / Tidsperiode",
                nameStyleOptions: {
                    "Tidløst": "Tidløst",
                    "Moderne (efter 2000)": "Moderne",
                    "Klassisk (1950-1990)": "Klassisk",
                    "Gammeldags (før 1950)": "Gammeldags"
                },
                labelGenerateMiddlename: "Generer også et mellemnavn",
                generateButtonText: "Find Navne",
                regenerateButtonText: "Prøv Igen",
                originMeaningLabel: "Oprindelse & Betydning (Fornavn)",
                personalJustificationLabel: "Personlig Begrundelse",
                apiError: "Kunne ikke generere navne. Prøv venligst igen.",
                noResultsError: "AI'en kunne desværre ikke finde nogle navne baseret på dine valg. Prøv at justere dine input.",
                helpTitle: "Sådan bruges Navnegeneratoren",
                helpContent: `
                    <h4 class="font-semibold text-lg mb-2">Hvad betyder de forskellige valg?</h4>
                    <p class="mb-4">Jo mere information du giver AI'en, jo mere personlige og unikke navneforslag kan den generere. Her er en guide til, hvordan hvert felt bruges:</p>
                    <div class="space-y-3">
                        <p><strong>Barnets Køn:</strong> Det mest grundlæggende valg. Bestemmer om AI'en skal finde drenge-, pige- eller kønsneutrale navne.</p>
                        <p><strong>Fødselsdato:</strong> Bruges især i <strong>Astrologi</strong>-metoden til at finde barnets stjernetegn. Kan også inspirere til navne baseret på årstiden.</p>
                        <p><strong>Forældres Navne:</strong> AI'en leder efter en rød tråd. Den kan finde navne med samme oprindelse, lyd eller kulturelle baggrund som forældrenes navne.</p>
                        <p><strong>Efternavn:</strong> Bruges til at sikre, at fornavnet klinger godt sammen med efternavnet og undgå kombinationer, der er svære at udtale.</p>
                        <p><strong>Nationalitet:</strong> Guider AI'en til at finde navne, der er populære eller har rødder i den angivne kultur eller region.</p>
                    </div>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Kreative Metoder</h4>
                    <div class="space-y-3">
                        <p><strong>Kreativ blanding:</strong> Lader AI'en frit kombinere alle metoder for de mest uventede og unikke forslag.</p>
                        <p><strong>Astrologi:</strong> Finder navne, der matcher de personlighedstræk, der er forbundet med barnets stjernetegn.</p>
                        <p><strong>Numerologi:</strong> Analyserer talværdien i navne for at finde forslag, der harmonerer energimæssigt.</p>
                        <p><strong>Historisk & Mytologisk:</strong> Henter inspiration fra historiske figurer, guder og helte.</p>
                        <p><strong>Naturinspiration:</strong> Foreslår navne baseret på elementer fra naturen.</p>
                    </div>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Navnestile</h4>
                    <div class="space-y-3">
                        <p><strong>Tidløst:</strong> Klassiske navne, der aldrig går af mode (f.eks. Anna, Peter).</p>
                        <p><strong>Moderne:</strong> Navne, der er blevet populære i de seneste årtier (f.eks. Luna, Noah).</p>
                        <p><strong>Klassisk:</strong> Populære navne fra midten af det 20. århundrede (f.eks. Hanne, Lars).</p>
                        <p><strong>Gammeldags:</strong> Traditionelle navne fra før 1950 med en nostalgisk klang (f.eks. Gerda, Aksel).</p>
                    </div>`,
                privacyTitle: "Privatlivspolitik",
                privacyContent: `
                    <h4 class="font-semibold text-lg mb-2">Dit privatliv er vigtigt</h4>
                    <p>Vi gemmer ingen af de oplysninger, du indtaster i formularen på denne side. Alle data (såsom navne, datoer og andre valg) bruges udelukkende til at generere navneforslag i det øjeblik, du klikker på knappen.</p>
                    <p>Når du forlader eller opdaterer siden, er alle indtastede oplysninger væk. Vi har ingen database og sporer ikke dine valg.</p>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Tredjepartstjenester</h4>
                    <p>Vi bruger tredjepartstjenester, som har deres egne privatlivspolitikker:</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Google AdSense:</strong> Viser annoncer på siden. Google kan bruge cookies til at vise dig relevante annoncer. Du kan læse mere i <a href="https://policies.google.com/technologies/ads" target="_blank" class="underline text-indigo-600">Googles annoncepolitik</a>.</li>
                        <li><strong>AI Service:</strong> De anonymiserede oplysninger fra formularen sendes til en AI-tjeneste for at generere navne. Disse data bruges ikke til at identificere dig.</li>
                    </ul>`
            },
            en: {
                mainTitle: "Name Wizard",
                subtitle: "Find the perfect and meaningful name for your child.",
                howItWorksButton: "How does it work?",
                privacyPolicyLink: "Privacy Policy",
                labelGender: "Child's Gender",
                genderBoy: "Boy",
                genderGirl: "Girl",
                genderNeutral: "Neutral",
                labelDob: "Date of Birth (optional)",
                labelParent1: "Parent 1's Name (optional)",
                parent1Placeholder: "E.g. 'Anne'",
                labelParent2: "Parent 2's Name (optional)",
                parent2Placeholder: "E.g. 'Jens'",
                labelMiddlename: "Desired Middle Name (optional)",
                middlenamePlaceholder: "E.g. 'Holm'",
                labelLastname: "Desired Last Name (optional)",
                lastnamePlaceholder: "E.g. 'Nielsen'",
                labelNationality: "Nationality (optional)",
                nationalityPlaceholder: "E.g. 'Danish', 'Scandinavian'",
                labelMethod: "Choose a creative method",
                methodOptions: {
                    "En blanding af alle metoder": "Creative Mix",
                    "Astrologi (baseret på stjernetegn)": "Astrology",
                    "Numerologi (baseret på tal og navne)": "Numerology",
                    "Historisk og mytologisk betydning": "Historical & Mythological",
                    "Naturinspiration (blomster, træer, steder)": "Nature Inspiration"
                },
                labelNameStyle: "Name Style / Era",
                nameStyleOptions: {
                    "Tidløst": "Timeless",
                    "Moderne (efter 2000)": "Modern",
                    "Klassisk (1950-1990)": "Classic",
                    "Gammeldags (før 1950)": "Old-fashioned"
                },
                labelGenerateMiddlename: "Also generate a middle name",
                generateButtonText: "Find Names",
                regenerateButtonText: "Try Again",
                originMeaningLabel: "Origin & Meaning (First Name)",
                personalJustificationLabel: "Personal Justification",
                apiError: "Could not generate names. Please try again.",
                noResultsError: "The AI could not find any names based on your choices. Please try adjusting your input.",
                helpTitle: "How to Use the Name Generator",
                helpContent: `
                    <h4 class="font-semibold text-lg mb-2">What do the different choices mean?</h4>
                    <p class="mb-4">The more information you provide to the AI, the more personal and unique name suggestions it can generate. Here is a guide to how each field is used:</p>
                    <div class="space-y-3">
                        <p><strong>Child's Gender:</strong> The most basic choice. Determines whether the AI should find boy, girl, or gender-neutral names.</p>
                        <p><strong>Date of Birth:</strong> Used especially in the <strong>Astrology</strong> method to determine the child's zodiac sign. It can also inspire names based on the season.</p>
                        <p><strong>Parents' Names:</strong> The AI looks for a common thread. It might find names with the same origin, sound, or cultural background as the parents' names.</p>
                        <p><strong>Last Name:</strong> Used to ensure that the first name sounds good with the last name and to avoid combinations that are difficult to pronounce.</p>
                        <p><strong>Nationality:</strong> Guides the AI to find names that are popular or have roots in the specified culture or region.</p>
                    </div>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Creative Methods</h4>
                    <div class="space-y-3">
                        <p><strong>Creative Mix:</strong> Lets the AI freely combine all methods for the most unexpected and unique suggestions.</p>
                        <p><strong>Astrology:</strong> Finds names that match the personality traits associated with the child's zodiac sign.</p>
                        <p><strong>Numerology:</strong> Analyzes the numerical value in names to find suggestions that harmonize energetically.</p>
                        <p><strong>Historical & Mythological:</strong> Draws inspiration from historical figures, gods, and heroes.</p>
                        <p><strong>Nature Inspiration:</strong> Suggests names based on elements from nature.</p>
                    </div>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Name Styles</h4>
                    <div class="space-y-3">
                        <p><strong>Timeless:</strong> Classic names that never go out of style (e.g., Anna, Peter).</p>
                        <p><strong>Modern:</strong> Names that have become popular in recent decades (e.g., Luna, Noah).</p>
                        <p><strong>Classic:</strong> Popular names from the mid-20th century (e.g., Susan, Michael).</p>
                        <p><strong>Old-fashioned:</strong> Traditional names from before 1950 with a nostalgic sound (e.g., Dorothy, Arthur).</p>
                    </div>`,
                privacyTitle: "Privacy Policy",
                privacyContent: `
                    <h4 class="font-semibold text-lg mb-2">Your Privacy is Important</h4>
                    <p>We do not save any of the information you enter in the form on this page. All data (such as names, dates, and other choices) is used solely to generate name suggestions the moment you click the button.</p>
                    <p>When you leave or refresh the page, all entered information is gone. We do not have a database and do not track your choices.</p>
                    <hr class="my-4">
                    <h4 class="font-semibold text-lg mb-2">Third-Party Services</h4>
                    <p>We use third-party services that have their own privacy policies:</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Google AdSense:</strong> Displays ads on the site. Google may use cookies to show you relevant ads. You can read more in <a href="https://policies.google.com/technologies/ads" target="_blank" class="underline text-indigo-600">Google's Ad Policy</a>.</li>
                        <li><strong>AI Service:</strong> The anonymized information from the form is sent to an AI service to generate names. This data is not used to identify you.</li>
                    </ul>`
            },
            de: {
                mainTitle: "Namens-Zauberer",
                subtitle: "Finden Sie den perfekten und bedeutungsvollen Namen für Ihr Kind.",
                howItWorksButton: "Wie funktioniert es?",
                privacyPolicyLink: "Datenschutz",
                labelGender: "Geschlecht des Kindes",
                genderBoy: "Junge",
                genderGirl: "Mädchen",
                genderNeutral: "Neutral",
                labelDob: "Geburtsdatum (optional)",
                labelParent1: "Name von Elternteil 1 (optional)",
                parent1Placeholder: "Z.B. 'Anne'",
                labelParent2: "Name von Elternteil 2 (optional)",
                parent2Placeholder: "Z.B. 'Jens'",
                labelMiddlename: "Gewünschter Zweitname (optional)",
                middlenamePlaceholder: "Z.B. 'Holm'",
                labelLastname: "Gewünschter Nachname (optional)",
                lastnamePlaceholder: "Z.B. 'Nielsen'",
                labelNationality: "Nationalität (optional)",
                nationalityPlaceholder: "Z.B. 'Deutsch', 'Skandinavisch'",
                labelMethod: "Wählen Sie eine kreative Methode",
                 methodOptions: {
                    "En blanding af alle metoder": "Kreative Mischung",
                    "Astrologi (baseret på stjernetegn)": "Astrologie",
                    "Numerologi (baseret på tal og navne)": "Numerologie",
                    "Historisk og mytologisk betydning": "Historisch & Mythologisch",
                    "Naturinspiration (blomster, træer, steder)": "Naturinspiration"
                },
                labelNameStyle: "Namensstil / Epoche",
                nameStyleOptions: {
                    "Tidløst": "Zeitlos",
                    "Moderne (efter 2000)": "Modern",
                    "Klassisk (1950-1990)": "Klassisch",
                    "Gammeldags (før 1950)": "Altmodisch"
                },
                labelGenerateMiddlename: "Auch einen Zweitnamen generieren",
                generateButtonText: "Namen finden",
                regenerateButtonText: "Erneut versuchen",
                originMeaningLabel: "Herkunft & Bedeutung (Vorname)",
                personalJustificationLabel: "Persönliche Begründung",
                apiError: "Namen konnten nicht generiert werden. Bitte versuchen Sie es erneut.",
                noResultsError: "Die KI konnte keine Namen basierend auf Ihrer Auswahl finden. Bitte passen Sie Ihre Eingaben an.",
                helpTitle: "So wird der Namensgenerator verwendet",
                helpContent: `
                    <h4 class="font-semibold text-lg mb-2">Was bedeuten die verschiedenen Optionen?</h4>
                    <p class="mb-4">Je mehr Informationen Sie der KI geben, desto persönlichere und einzigartigere Namensvorschläge kann sie generieren. Hier ist eine Anleitung, wie jedes Feld verwendet wird:</p>
                    <div class="space-y-3">
                        <p><strong>Geschlecht des Kindes:</strong> Die grundlegendste Wahl. Bestimmt, ob die KI Jungen-, Mädchen- oder geschlechtsneutrale Namen finden soll.</p>
                        <p><strong>Geburtsdatum:</strong> Wird insbesondere bei der <strong>Astrologie</strong>-Methode verwendet, um das Sternzeichen des Kindes zu bestimmen. Kann auch zu Namen inspireren, die auf der Jahreszeit basieren.</p>
                        <p><strong>Namen der Eltern:</strong> Die KI sucht nach einem roten Faden. Sie kann Namen mit demselben Ursprung, Klang oder kulturellen Hintergrund wie die Namen der Eltern finden.</p>
                        <p><strong>Nachname:</strong> Wird verwendet, um sicherzustellen, dass der Vorname gut zum Nachnamen passt und schwer auszusprechende Kombinationen vermieden werden.</p>
                        <p><strong>Nationalität:</strong> Leitet die KI an, Namen zu finden, die in der angegebenen Kultur oder Region beliebt sind oder dort ihre Wurzeln haben.</p>
                        </div>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Kreative Methoden</h4>
                        <div class="space-y-3">
                            <p><strong>Kreative Mischung:</strong> Lässt die KI alle Methoden frei kombinieren, um die unerwartetsten Vorschläge zu erhalten.</p>
                            <p><strong>Astrologie:</strong> Findet Namen, die zu den Persönlichkeitsmerkmalen des Sternzeichens des Kindes passen.</p>
                            <p><strong>Numerologie:</strong> Analysiert den numerischen Wert von Namen, um energetisch harmonische Vorschläge zu finden.</p>
                            <p><strong>Historisch & Mythologisch:</strong> Inspiriert von historischen Figuren, Göttern und Helden.</p>
                            <p><strong>Naturinspiration:</strong> Schlägt Namen vor, die auf Elementen aus der Natur basieren.</p>
                        </div>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Namensstile</h4>
                        <div class="space-y-3">
                            <p><strong>Zeitlos:</strong> Klassische Namen, die nie aus der Mode kommen (z. B. Anna, Peter).</p>
                            <p><strong>Modern:</strong> Namen, die in den letzten Jahrzehnten populär geworden sind (z. B. Luna, Noah).</p>
                            <p><strong>Klassisch:</strong> Beliebte Namen aus der Mitte des 20. Jahrhunderts (z. B. Sabine, Michael).</p>
                            <p><strong>Altmodisch:</strong> Traditionelle Namen aus der Zeit vor 1950 mit nostalgischem Klang (z. B. Gerda, Arthur).</p>
                        </div>`,
                    privacyTitle: "Datenschutzrichtlinie",
                    privacyContent: `
                        <h4 class="font-semibold text-lg mb-2">Ihre Privatsphäre ist wichtig</h4>
                        <p>Wir speichern keine der Informationen, die Sie in das Formular auf dieser Seite eingeben. Alle Daten (wie Namen, Daten und andere Auswahlmöglichkeiten) werden ausschließlich dazu verwendet, Namensvorschläge zu generieren, sobald Sie auf die Schaltfläche klicken.</p>
                        <p>Wenn Sie die Seite verlassen oder aktualisieren, sind alle eingegebenen Informationen verschwunden. Wir führen keine Datenbank und verfolgen Ihre Auswahl nicht.</p>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Drittanbieterdienste</h4>
                        <p>Wir nutzen Drittanbieterdienste, die ihre eigenen Datenschutzrichtlinien haben:</p>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Google AdSense:</strong> Zeigt Anzeigen auf der Website an. Google kann Cookies verwenden, um Ihnen relevante Anzeigen zu zeigen. Mehr dazu erfahren Sie in der <a href="https://policies.google.com/technologies/ads" target="_blank" class="underline text-indigo-600">Anzeigenrichtlinie von Google</a>.</li>
                            <li><strong>KI-Dienst:</strong> Die anonymisierten Informationen aus dem Formular werden an einen KI-Dienst gesendet, um Namen zu generieren. Diese Daten werden nicht zur Identifizierung Ihrer Person verwendet.</li>
                        </ul>`
                },
                es: {
                    mainTitle: "Mago de Nombres",
                    subtitle: "Encuentra el nombre perfecto y significativo para tu hijo.",
                    howItWorksButton: "¿Cómo funciona?",
                    privacyPolicyLink: "Política de Privacidad",
                    labelGender: "Género del bebé",
                    genderBoy: "Niño",
                    genderGirl: "Niña",
                    genderNeutral: "Neutral",
                    labelDob: "Fecha de nacimiento (opcional)",
                    labelParent1: "Nombre del Padre/Madre 1 (opcional)",
                    parent1Placeholder: "Ej. 'Ana'",
                    labelParent2: "Nombre del Padre/Madre 2 (opcional)",
                    parent2Placeholder: "Ej. 'Juan'",
                    labelMiddlename: "Segundo nombre deseado (opcional)",
                    middlenamePlaceholder: "Ej. 'García'",
                    labelLastname: "Apellido deseado (opcional)",
                    lastnamePlaceholder: "Ej. 'Pérez'",
                    labelNationality: "Nacionalidad (opcional)",
                    nationalityPlaceholder: "Ej. 'Español', 'Escandinavo'",
                    labelMethod: "Elige un método creativo",
                    methodOptions: {
                        "En blanding af alle metoder": "Mezcla Creativa",
                        "Astrologi (baseret på stjernetegn)": "Astrología",
                        "Numerologi (baseret på tal og navne)": "Numerología",
                        "Historisk og mytologisk betydning": "Histórico y Mitológico",
                        "Naturinspiration (blomster, træer, steder)": "Inspiración en la Naturaleza"
                    },
                    labelNameStyle: "Estilo de Nombre / Época",
                    nameStyleOptions: {
                        "Tidløst": "Atemporal",
                        "Moderne (efter 2000)": "Moderno",
                        "Klassisk (1950-1990)": "Clásico",
                        "Gammeldags (før 1950)": "Antiguo"
                    },
                    labelGenerateMiddlename: "Generar también un segundo nombre",
                    generateButtonText: "Encontrar Nombres",
                    regenerateButtonText: "Intentar de Nuevo",
                    originMeaningLabel: "Origen y Significado (Nombre)",
                    personalJustificationLabel: "Justificación Personal",
                    apiError: "No se pudieron generar los nombres. Por favor, inténtalo de nuevo.",
                    noResultsError: "La IA no pudo encontrar ningún nombre basado en tus elecciones. Por favor, intenta ajustar tu entrada.",
                    helpTitle: "Cómo usar el Generador de Nombres",
                    helpContent: `
                        <h4 class="font-semibold text-lg mb-2">¿Qué significan las diferentes opciones?</h4>
                        <p class="mb-4">Cuanta más información proporciones a la IA, más personales y únicas serán las sugerencias de nombres que podrá generar. Aquí tienes una guía sobre cómo se utiliza cada campo:</p>
                        <div class="space-y-3">
                            <p><strong>Género del bebé:</strong> La elección más básica. Determina si la IA debe buscar nombres de niño, niña o de género neutro.</p>
                            <p><strong>Fecha de nacimiento:</strong> Se utiliza especialmente en el método de <strong>Astrología</strong> para determinar el signo zodiacal del niño. También puede inspirar nombres basados en la estación del año.</p>
                            <p><strong>Nombres de los padres:</strong> La IA busca un hilo conductor. Puede encontrar nombres con el mismo origen, sonido o trasfondo cultural que los nombres de los padres.</p>
                            <p><strong>Apellido:</strong> Se utiliza para asegurar que el nombre de pila suene bien con el apellido y para evitar combinaciones difíciles de pronunciar.</p>
                            <p><strong>Nacionalidad:</strong> Guía a la IA para que encuentre nombres que sean populares o que tengan raíces en la cultura o región especificada.</p>
                        </div>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Métodos Creativos</h4>
                        <div class="space-y-3">
                            <p><strong>Mezcla Creativa:</strong> Permite que la IA combine libremente todos los métodos para obtener las sugerencias más inesperadas y únicas.</p>
                            <p><strong>Astrología:</strong> Encuentra nombres que coincidan con los rasgos de personalidad asociados al signo zodiacal del niño.</p>
                            <p><strong>Numerología:</strong> Analiza el valor numérico de los nombres para encontrar sugerencias que armonicen energéticamente.</p>
                            <p><strong>Histórico y Mitológico:</strong> Se inspira en figuras históricas, dioses y héroes.</p>
                            <p><strong>Inspiración en la Naturaleza:</strong> Sugiere nombres basados en elementos de la naturaleza.</p>
                        </div>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Estilos de Nombre</h4>
                        <div class="space-y-3">
                            <p><strong>Atemporal:</strong> Nombres clásicos que nunca pasan de moda (p. ej., Ana, Pedro).</p>
                            <p><strong>Moderno:</strong> Nombres que se han vuelto populares en las últimas décadas (p. ej., Luna, Noah).</p>
                            <p><strong>Clásico:</strong> Nombres populares de mediados del siglo XX (p. ej., Susana, Miguel).</p>
                            <p><strong>Antiguo:</strong> Nombres tradicionales de antes de 1950 con un sonido nostálgico (p. ej., Carmen, Arturo).</p>
                        </div>`,
                    privacyTitle: "Política de Privacidad",
                    privacyContent: `
                        <h4 class="font-semibold text-lg mb-2">Tu Privacidad es Importante</h4>
                        <p>No guardamos ninguna de la información que introduces en el formulario de esta página. Todos los datos (como nombres, fechas y otras opciones) se utilizan únicamente para generar sugerencias de nombres en el momento en que haces clic en el botón.</p>
                        <p>Cuando sales o actualizas la página, toda la información introducida desaparece. No tenemos una base de datos y no rastreamos tus elecciones.</p>
                        <hr class="my-4">
                        <h4 class="font-semibold text-lg mb-2">Servicios de Terceros</h4>
                        <p>Utilizamos servicios de terceros que tienen sus propias políticas de privacidad:</p>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Google AdSense:</strong> Muestra anuncios en el sitio. Google puede usar cookies para mostrarte anuncios relevantes. Puedes leer más en la <a href="https://policies.google.com/technologies/ads" target="_blank" class="underline text-indigo-600">Política de Anuncios de Google</a>.</li>
                            <li><strong>Servicio de IA:</strong> La información anonimizada del formulario se envía a un servicio de IA para generar nombres. Estos datos no se utilizan para identificarte.</li>
                        </ul>`
                }
            };

            const nameForm = document.getElementById('name-form');
            const loader = document.getElementById('loader');
            const resultsContainer = document.getElementById('results');
            const errorMessage = document.getElementById('error-message');
            const regenerateContainer = document.getElementById('regenerate-container');
            const regenerateButton = document.getElementById('regenerate-button');
            const languageSelect = document.getElementById('language-select');
            
            // Modal elements
            const helpModal = document.getElementById('help-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalCloseButton = document.getElementById('modal-close-button');
            const howItWorksButton = document.getElementById('how-it-works-button');
            const privacyPolicyLink = document.getElementById('privacy-policy-link');


            let currentLang = 'da';

            function updateLanguage(lang) {
                currentLang = lang;
                const t = translations[lang];

                document.documentElement.lang = lang;
                document.getElementById('main-title').textContent = t.mainTitle;
                document.getElementById('subtitle').textContent = t.subtitle;
                document.getElementById('how-it-works-button').textContent = t.howItWorksButton;
                document.getElementById('privacy-policy-link').textContent = t.privacyPolicyLink;
                document.getElementById('label-gender').textContent = t.labelGender;
                document.getElementById('gender-boy').textContent = t.genderBoy;
                document.getElementById('gender-girl').textContent = t.genderGirl;
                document.getElementById('gender-neutral').textContent = t.genderNeutral;
                document.getElementById('label-dob').textContent = t.labelDob;
                document.getElementById('label-parent1').textContent = t.labelParent1;
                document.getElementById('parent1').placeholder = t.parent1Placeholder;
                document.getElementById('label-parent2').textContent = t.labelParent2;
                document.getElementById('parent2').placeholder = t.parent2Placeholder;
                document.getElementById('label-middlename').textContent = t.labelMiddlename;
                document.getElementById('middlename').placeholder = t.middlenamePlaceholder;
                document.getElementById('label-lastname').textContent = t.labelLastname;
                document.getElementById('lastname').placeholder = t.lastnamePlaceholder;
                document.getElementById('label-nationality').textContent = t.labelNationality;
                document.getElementById('nationality').placeholder = t.nationalityPlaceholder;
                document.getElementById('label-method').textContent = t.labelMethod;
                document.getElementById('label-name-style').textContent = t.labelNameStyle;
                document.getElementById('label-generate-middlename').textContent = t.labelGenerateMiddlename;
                document.getElementById('generate-button-text').textContent = t.generateButtonText;
                document.getElementById('regenerate-button-text').textContent = t.regenerateButtonText;
                
                const methodSelect = document.getElementById('method');
                methodSelect.innerHTML = '';
                for (const [value, text] of Object.entries(t.methodOptions)) {
                    const option = document.createElement('option');
                    option.value = value;
                    option.textContent = text;
                    methodSelect.appendChild(option);
                }

                const nameStyleSelect = document.getElementById('name-style');
                nameStyleSelect.innerHTML = '';
                for (const [value, text] of Object.entries(t.nameStyleOptions)) {
                    const option = document.createElement('option');
                    option.value = value;
                    option.textContent = text;
                    nameStyleSelect.appendChild(option);
                }
            }
            
            languageSelect.addEventListener('change', (e) => {
                updateLanguage(e.target.value);
            });

            const getPrompt = (isRegenerating = false) => {
                const formData = new FormData(nameForm);
                const gender = formData.get('gender');
                const dob = formData.get('dob') || 'ikke angivet';
                const parent1 = formData.get('parent1') || 'ikke angivet';
                const parent2 = formData.get('parent2') || 'ikke angivet';
                const middlename = formData.get('middlename') || 'ikke angivet';
                const lastname = formData.get('lastname') || 'ikke angivet';
                const nationality = formData.get('nationality') || 'ikke angivet';
                const method = formData.get('method');
                const nameStyle = formData.get('name-style');
                const generateMiddlename = document.getElementById('generate-middlename').checked;

                let regenerationInstruction = isRegenerating ? "VIGTIGT: Dette er en anmodning om at regenerere. Giv venligst 9 HELT NYE OG MARKANT ANDERLEDES forslag end dem, du ville have givet før. Vær ekstra kreativ og undgå almindelige navne." : "Prioriter unikke og mindre almindelige navne.";

                // Language-specific prompt instructions
                const langInstructions = {
                    da: `Du er en kreativ og empatisk navneekspert. Svar altid på dansk.`,
                    en: `You are a creative and empathetic name expert. Always respond in English.`,
                    de: `Du bist ein kreativer und einfühlsamer Namensexperte. Antworte immer auf Deutsch.`,
                    es: `Eres un experto en nombres creativo y empático. Responde siempre en español.`
                };

                return `
                    ${langInstructions[currentLang]}
                    Din opgave er at generere 9 unikke og varierede navneforslag baseret på følgende oplysninger.
                    ${regenerationInstruction}

                    - Sprog for output: ${currentLang}
                    - Barnets Køn: ${gender}
                    - Navnestil/Tidsperiode: ${nameStyle}
                    - Fødselsdato: ${dob}
                    - Forældres Navne: ${parent1} og ${parent2}
                    - Ønsket Mellemnavn: ${middlename}
                    - Ønsket Efternavn: ${lastname}
                    - Nationalitet: ${nationality}
                    - Ønsket kreativ metode: ${method}
                    - Skal der genereres et mellemnavn? ${generateMiddlename ? 'Ja' : 'Nej'}

                    For hvert forslag, lever følgende i JSON-format:
                    1.  **Navn**: Et fornavn, der passer til den valgte stil (${nameStyle}).
                    2.  **Mellemnavn**: Et passende mellemnavn. Hvis brugeren har bedt om at få genereret et ("Ja" ovenfor), SKAL du generere et. Hvis brugeren har angivet et ønsket mellemnavn, kan du bruge det eller lade det inspirere. Ellers kan du lade feltet være tomt.
                    3.  **Efternavn**: Brug det efternavn brugeren har angivet. Hvis intet er angivet, lad feltet være tomt.
                    4.  **Oprindelse og Betydning**: En kort beskrivelse af fornavnets oprindelse og betydning.
                    5.  **Personlig Begrundelse**: En hjertevarm begrundelse for, hvorfor dette fulde navn er et godt match, baseret på de givne oplysninger, den valgte metode og navnestilen.
                `;
            };

            const fetchNames = async (prompt) => {
                resultsContainer.innerHTML = '';
                errorMessage.classList.add('hidden');
                loader.classList.remove('hidden');
                regenerateContainer.classList.add('hidden');

                try {
                    const payload = { prompt: prompt };
                    
                    const apiUrl = "https://min-ai-backend.onrender.com/api/generate";
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        throw new Error(`API call failed with status: ${response.status}. Body: ${errorBody}`);
                    }

                    const parsedJson = await response.json();
                    
                    if (parsedJson.navneforslag) {
                        displayResults(parsedJson.navneforslag);
                        regenerateContainer.classList.remove('hidden');
                    } else {
                        console.error("Unexpected API response structure:", parsedJson);
                        throw new Error(translations[currentLang].apiError);
                    }

                } catch (error) {
                    console.error('Error generating names:', error);
                    errorMessage.textContent = `An error occurred: ${error.message}. Please check the console for details and try again.`;
                    errorMessage.classList.remove('hidden');
                } finally {
                    loader.classList.add('hidden');
                }
            };
            
            nameForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const prompt = getPrompt();
                await fetchNames(prompt);
            });

            regenerateButton.addEventListener('click', async () => {
                const regenerationPrompt = getPrompt(true);
                await fetchNames(regenerationPrompt);
            });

            function displayResults(suggestions) {
                if (!suggestions || suggestions.length === 0) {
                     errorMessage.textContent = translations[currentLang].noResultsError;
                     errorMessage.classList.remove('hidden');
                     return;
                }
                
                const gender = new FormData(nameForm).get('gender');

                suggestions.forEach(suggestion => {
                    const card = document.createElement('div');
                    
                    let borderColorClass = 'border-gray-200';
                    let textColorClass = 'text-sky-600';
                    if (gender === 'Dreng') {
                        borderColorClass = 'border-blue-300';
                        textColorClass = 'text-blue-600';
                    } else if (gender === 'Pige') {
                        borderColorClass = 'border-pink-300';
                        textColorClass = 'text-pink-600';
                    } else {
                        borderColorClass = 'border-purple-300';
                        textColorClass = 'text-purple-600';
                    }
                    
                    card.className = `card animate-fade-in border-t-4 ${borderColorClass}`;
                    
                    let fullName = suggestion.navn;
                    if (suggestion.mellemnavn && suggestion.mellemnavn.trim() !== "") {
                        fullName += ` ${suggestion.mellemnavn}`;
                    }
                    if (suggestion.efternavn && suggestion.efternavn.trim() !== "") {
                        fullName += ` ${suggestion.efternavn}`;
                    }

                    card.innerHTML = `
                        <h3 class="text-2xl font-display ${textColorClass}">${fullName}</h3>
                        <div class="mt-4">
                            <p class="font-semibold text-gray-700">${translations[currentLang].originMeaningLabel}</p>
                            <p class="text-gray-600 mt-1">${suggestion.oprindelse_betydning}</p>
                        </div>
                        <div class="mt-4">
                            <p class="font-semibold text-gray-700">${translations[currentLang].personalJustificationLabel}</p>
                            <p class="text-gray-600 mt-1">${suggestion.personlig_begrundelse}</p>
                        </div>
                    `;
                    resultsContainer.appendChild(card);
                });

                setTimeout(() => {
                    document.querySelectorAll('.animate-fade-in').forEach(el => el.style.opacity = 1);
                }, 100);
            }

            // Modal Logic
            function showModal(type) {
                const t = translations[currentLang];
                if (type === 'how-it-works') {
                    modalTitle.textContent = t.helpTitle;
                    modalBody.innerHTML = t.helpContent;
                } else if (type === 'privacy') {
                    modalTitle.textContent = t.privacyTitle;
                    modalBody.innerHTML = t.privacyContent;
                }
                
                helpModal.classList.remove('hidden');
                setTimeout(() => {
                    helpModal.classList.remove('opacity-0');
                    helpModal.querySelector('.modal-content').classList.remove('scale-95');
                }, 10);
            }

            function hideModal() {
                helpModal.classList.add('opacity-0');
                helpModal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => {
                    helpModal.classList.add('hidden');
                }, 250);
            }

            howItWorksButton.addEventListener('click', (e) => {
                e.preventDefault();
                showModal('how-it-works');
            });
            privacyPolicyLink.addEventListener('click', (e) => {
                e.preventDefault();
                showModal('privacy');
            });
            modalCloseButton.addEventListener('click', hideModal);
            helpModal.addEventListener('click', (e) => {
                if (e.target === helpModal) {
                    hideModal();
                }
            });

            // Theme switcher
            const genderRadios = document.querySelectorAll('input[name="gender"]');
            const body = document.body;

            const themes = {
                'Dreng': 'linear-gradient(to bottom right, #f0f9ff, #e0f2fe, #dbeafe)',
                'Pige': 'linear-gradient(to bottom right, #fdf2f8, #fce7f3, #fbcfe8)',
                'Kønsneutral': 'linear-gradient(to bottom right, #f5f3ff, #ede9fe, #ddd6fe)'
            };

            function updateTheme(gender) {
                body.style.backgroundImage = themes[gender];
            }

            genderRadios.forEach(radio => {
                radio.addEventListener('change', (event) => {
                    updateTheme(event.target.value);
                });
            });

            // Initialize with default language and theme
            updateLanguage('da');
            updateTheme('Dreng'); // Default to boy theme
    </script>
</body>
</html>
